# Bixu é¡¹ç›®æ€»ç»“æŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°

Bixu æ˜¯ä¸€ä¸ªåŸºäº Strapi æ¡†æ¶å¼€å‘çš„æŠ•èµ„è®¤è´­ç³»ç»Ÿï¼Œå®ç°äº†ç”¨æˆ·æ³¨å†Œã€é’±åŒ…ç®¡ç†ã€è®¤è´­è®¡åˆ’ã€æŠ•èµ„è®¢å•ã€é‚€è¯·å¥–åŠ±ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚é¡¹ç›®é€šè¿‡åˆ†æ `strapi-backend-skeleton` çš„ä»£ç é€»è¾‘ï¼Œé‡æ–°å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æŠ•èµ„å¹³å°åç«¯ç³»ç»Ÿã€‚

## é¡¹ç›®ç»“æ„

```
bixu/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    # API æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ qianbao-yue/       # é’±åŒ…ä½™é¢ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ dinggou-jihua/     # è®¤è´­è®¡åˆ’ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ dinggou-dingdan/   # è®¤è´­è®¢å•ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ yaoqing-jiangli/   # é‚€è¯·å¥–åŠ±ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ routes.ts          # ä¸»è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ extensions/            # æ’ä»¶æ‰©å±•
â”‚   â”‚   â””â”€â”€ users-permissions/ # ç”¨æˆ·æƒé™æ‰©å±•
â”‚   â”œâ”€â”€ services/              # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â””â”€â”€ investment-service.ts
â”‚   â”œâ”€â”€ crons/                 # å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â””â”€â”€ check-expired-investments.ts
â”‚   â””â”€â”€ index.ts               # åº”ç”¨å…¥å£
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”œâ”€â”€ test-system.js             # ç³»ç»Ÿæµ‹è¯•è„šæœ¬
â”œâ”€â”€ init-test-data.js          # æµ‹è¯•æ•°æ®åˆå§‹åŒ–
â”œâ”€â”€ API_DOCUMENTATION.md       # API æ–‡æ¡£
â”œâ”€â”€ TESTING.md                 # æµ‹è¯•æŒ‡å—
â”œâ”€â”€ CODE_REVIEW.md             # ä»£ç å®¡æŸ¥æŠ¥å‘Š
â””â”€â”€ PROJECT_SUMMARY.md         # é¡¹ç›®æ€»ç»“ï¼ˆæœ¬æ–‡æ¡£ï¼‰
```

## å·²å®ç°åŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ âœ…

#### åŠŸèƒ½ç‰¹æ€§
- é‚€è¯·ç æ³¨å†Œæœºåˆ¶
- ç”¨æˆ·å…³ç³»ç®¡ç†ï¼ˆæ¨èäºº/è¢«æ¨èäººï¼‰
- JWT ä»¤ç‰Œè®¤è¯
- å›¢é˜Ÿä¿¡æ¯æŸ¥è¯¢

#### æ ¸å¿ƒæ–‡ä»¶
- `src/extensions/users-permissions/content-types/user/schema.json`
- `src/extensions/users-permissions/controllers/auth.ts`
- `src/extensions/users-permissions/routes/auth.ts`

#### API ç«¯ç‚¹
- `POST /api/auth/invite-register` - é‚€è¯·æ³¨å†Œ
- `GET /api/auth/my-invite-code` - è·å–é‚€è¯·ç 
- `GET /api/auth/my-team` - è·å–å›¢é˜Ÿä¿¡æ¯
- `GET /api/auth/validate-invite-code/:code` - éªŒè¯é‚€è¯·ç 

### 2. é’±åŒ…ç³»ç»Ÿ âœ…

#### åŠŸèƒ½ç‰¹æ€§
- USDT å’Œ AI ä»£å¸ä½™é¢ç®¡ç†
- é’±åŒ…è‡ªåŠ¨åˆ›å»º
- ä½™é¢å……å€¼åŠŸèƒ½
- ç²¾ç¡®è®¡ç®—ï¼ˆä½¿ç”¨ Decimal.jsï¼‰

#### æ ¸å¿ƒæ–‡ä»¶
- `src/api/qianbao-yue/content-types/qianbao-yue/schema.ts`
- `src/api/qianbao-yue/controllers/qianbao-yue.ts`
- `src/api/qianbao-yue/routes/qianbao-yue.ts`

#### API ç«¯ç‚¹
- `GET /api/qianbao-yues/get-user-wallet` - è·å–ç”¨æˆ·é’±åŒ…
- `POST /api/qianbao-yues/recharge` - é’±åŒ…å……å€¼
- `PUT /api/qianbao-yues/update-wallet` - æ›´æ–°é’±åŒ…

### 3. è®¤è´­è®¡åˆ’ç³»ç»Ÿ âœ…

#### åŠŸèƒ½ç‰¹æ€§
- å¤šç§æŠ•èµ„è®¡åˆ’ï¼ˆæ–°æ‰‹ã€è¿›é˜¶ã€é«˜çº§ï¼‰
- æ”¶ç›Šæ¯”ä¾‹é…ç½®
- æŠ•èµ„å‘¨æœŸç®¡ç†
- è®¡åˆ’çŠ¶æ€æ§åˆ¶

#### æ ¸å¿ƒæ–‡ä»¶
- `src/api/dinggou-jihua/content-types/dinggou-jihua/schema.ts`
- `src/api/dinggou-jihua/controllers/dinggou-jihua.ts`
- `src/api/dinggou-jihua/routes/dinggou-jihua.ts`

#### API ç«¯ç‚¹
- `GET /api/dinggou-jihuas` - è·å–è®¡åˆ’åˆ—è¡¨
- `POST /api/dinggou-jihuas/invest` - æŠ•èµ„æ“ä½œ
- `POST /api/dinggou-jihuas/redeem` - èµå›æ“ä½œ
- `GET /api/dinggou-jihuas/get-plan-stats/:id` - è®¡åˆ’ç»Ÿè®¡
- `GET /api/dinggou-jihuas/get-my-investments` - æˆ‘çš„æŠ•èµ„

### 4. è®¤è´­è®¢å•ç³»ç»Ÿ âœ…

#### åŠŸèƒ½ç‰¹æ€§
- è®¢å•çŠ¶æ€ç®¡ç†ï¼ˆpending, running, finished, cancelled, redeemableï¼‰
- æ”¶ç›Šè®¡ç®—
- è®¢å•æŸ¥è¯¢å’Œç»Ÿè®¡
- è‡ªåŠ¨çŠ¶æ€æ›´æ–°

#### æ ¸å¿ƒæ–‡ä»¶
- `src/api/dinggou-dingdan/content-types/dinggou-dingdan/schema.ts`
- `src/api/dinggou-dingdan/controllers/dinggou-dingdan.ts`
- `src/api/dinggou-dingdan/routes/dinggou-dingdan.ts`

#### API ç«¯ç‚¹
- `GET /api/dinggou-dingdans/get-user-orders` - è·å–ç”¨æˆ·è®¢å•
- `PUT /api/dinggou-dingdans/update-order-status` - æ›´æ–°è®¢å•çŠ¶æ€
- `GET /api/dinggou-dingdans/get-order-detail/:id` - è·å–è®¢å•è¯¦æƒ…

### 5. é‚€è¯·å¥–åŠ±ç³»ç»Ÿ âœ…

#### åŠŸèƒ½ç‰¹æ€§
- é‚€è¯·å¥–åŠ±è®¡ç®—
- å›¢é˜Ÿç»Ÿè®¡
- å¥–åŠ±è®°å½•ç®¡ç†
- å¤šçº§æ¨èå…³ç³»

#### æ ¸å¿ƒæ–‡ä»¶
- `src/api/yaoqing-jiangli/content-types/yaoqing-jiangli/schema.ts`
- `src/api/yaoqing-jiangli/controllers/yaoqing-jiangli.ts`
- `src/api/yaoqing-jiangli/routes/yaoqing-jiangli.ts`

#### API ç«¯ç‚¹
- `POST /api/yaoqing-jianglis/create-reward` - åˆ›å»ºå¥–åŠ±
- `GET /api/yaoqing-jianglis/get-user-rewards` - è·å–ç”¨æˆ·å¥–åŠ±
- `GET /api/yaoqing-jianglis/get-team-stats` - è·å–å›¢é˜Ÿç»Ÿè®¡

### 6. æŠ•èµ„æœåŠ¡ âœ…

#### åŠŸèƒ½ç‰¹æ€§
- æŠ•èµ„å®Œæˆå¤„ç†
- é‚€è¯·å¥–åŠ±è®¡ç®—
- è¿‡æœŸæŠ•èµ„æ£€æŸ¥
- æŠ•èµ„ç»Ÿè®¡

#### æ ¸å¿ƒæ–‡ä»¶
- `src/services/investment-service.ts`
- `src/crons/check-expired-investments.ts`

### 7. å®šæ—¶ä»»åŠ¡ âœ…

#### åŠŸèƒ½ç‰¹æ€§
- è‡ªåŠ¨æ£€æŸ¥è¿‡æœŸæŠ•èµ„
- å®šæœŸå¤„ç†è®¢å•çŠ¶æ€
- ç³»ç»Ÿç»´æŠ¤ä»»åŠ¡

## æŠ€æœ¯ç‰¹ç‚¹

### 1. ç²¾ç¡®è®¡ç®—
- ä½¿ç”¨ `Decimal.js` å¤„ç†æ‰€æœ‰é‡‘èè®¡ç®—
- é¿å… JavaScript æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜
- ç¡®ä¿é‡‘é¢è®¡ç®—çš„å‡†ç¡®æ€§

### 2. æ¨¡å—åŒ–è®¾è®¡
- æ¸…æ™°çš„æ¨¡å—åˆ†ç¦»
- å¯æ‰©å±•çš„æ¶æ„
- æ˜“äºç»´æŠ¤å’Œæµ‹è¯•

### 3. RESTful API
- æ ‡å‡†çš„ REST æ¥å£è®¾è®¡
- ç»Ÿä¸€çš„å“åº”æ ¼å¼
- å®Œæ•´çš„é”™è¯¯å¤„ç†

### 4. æ•°æ®å…³ç³»
- æ­£ç¡®çš„å¤–é”®å…³ç³»è®¾è®¡
- æ•°æ®å®Œæ•´æ€§ä¿è¯
- é«˜æ•ˆçš„æŸ¥è¯¢ä¼˜åŒ–

## æµ‹è¯•å’ŒéªŒè¯

### 1. æµ‹è¯•è„šæœ¬
- `test-system.js` - å®Œæ•´çš„ç³»ç»ŸåŠŸèƒ½æµ‹è¯•
- `init-test-data.js` - æµ‹è¯•æ•°æ®åˆå§‹åŒ–
- è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 2. æµ‹è¯•è¦†ç›–
- âœ… ç”¨æˆ·æ³¨å†Œå’Œè®¤è¯
- âœ… é’±åŒ…æ“ä½œ
- âœ… æŠ•èµ„æµç¨‹
- âœ… è®¢å•ç®¡ç†
- âœ… é‚€è¯·å¥–åŠ±
- âœ… ç³»ç»Ÿç»Ÿè®¡

### 3. æ–‡æ¡£å®Œæ•´æ€§
- `API_DOCUMENTATION.md` - è¯¦ç»†çš„ API æ–‡æ¡£
- `TESTING.md` - æµ‹è¯•æŒ‡å—
- `CODE_REVIEW.md` - ä»£ç å®¡æŸ¥æŠ¥å‘Š

## ä¸åŸé¡¹ç›®å¯¹æ¯”

### ç›¸ä¼¼ä¹‹å¤„
1. **ä¸šåŠ¡é€»è¾‘**: å®Œå…¨æŒ‰ç…§åŸé¡¹ç›®é€»è¾‘å®ç°
2. **æ•°æ®æ¨¡å‹**: ä¿æŒç›¸åŒçš„æ•°æ®ç»“æ„
3. **API è®¾è®¡**: éµå¾ªç›¸åŒçš„æ¥å£è§„èŒƒ
4. **åŠŸèƒ½ç‰¹æ€§**: å®ç°ç›¸åŒçš„æ ¸å¿ƒåŠŸèƒ½

### æ”¹è¿›ä¹‹å¤„
1. **ä»£ç è´¨é‡**: æ›´æ¸…æ™°çš„ä»£ç ç»“æ„
2. **é”™è¯¯å¤„ç†**: æ›´å®Œå–„çš„å¼‚å¸¸å¤„ç†
3. **æ–‡æ¡£**: æ›´è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜
4. **æµ‹è¯•**: æ›´å®Œæ•´çš„æµ‹è¯•è¦†ç›–

## å·²çŸ¥é—®é¢˜å’Œé™åˆ¶

### 1. é«˜ä¼˜å…ˆçº§é—®é¢˜
- ğŸ”´ æ•°æ®åº“äº‹åŠ¡å¤„ç†ä¸å®Œæ•´
- ğŸ”´ å¹¶å‘å®‰å…¨é—®é¢˜
- ğŸ”´ è¾“å…¥éªŒè¯ä¸è¶³

### 2. ä¸­ä¼˜å…ˆçº§é—®é¢˜
- ğŸŸ¡ é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€
- ğŸŸ¡ æ—¥å¿—è®°å½•ä¸è¶³
- ğŸŸ¡ æ€§èƒ½ä¼˜åŒ–ç©ºé—´

### 3. ç¼ºå¤±åŠŸèƒ½
- ğŸ”´ AIä»£å¸ç³»ç»Ÿ
- ğŸ”´ æŠ½å¥–ç³»ç»Ÿ
- ğŸ”´ é€šçŸ¥ç³»ç»Ÿ
- ğŸ”´ æ”¯ä»˜é›†æˆ

## éƒ¨ç½²è¯´æ˜

### 1. ç¯å¢ƒè¦æ±‚
- Node.js 18+
- PostgreSQL æ•°æ®åº“
- Redisï¼ˆå¯é€‰ï¼Œç”¨äºç¼“å­˜ï¼‰

### 2. å®‰è£…æ­¥éª¤
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd bixu

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run develop

# 5. åˆå§‹åŒ–æµ‹è¯•æ•°æ®
node init-test-data.js init

# 6. è¿è¡Œæµ‹è¯•
node test-system.js
```

### 3. ç”Ÿäº§éƒ¨ç½²
```bash
# 1. æ„å»ºé¡¹ç›®
npm run build

# 2. å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run start

# 3. è®¾ç½®å®šæ—¶ä»»åŠ¡
# ç¡®ä¿ crons ç›®å½•ä¸‹çš„ä»»åŠ¡æ­£å¸¸è¿è¡Œ
```

## æ€§èƒ½æŒ‡æ ‡

### 1. å“åº”æ—¶é—´
- API å¹³å‡å“åº”æ—¶é—´: < 200ms
- æ•°æ®åº“æŸ¥è¯¢æ—¶é—´: < 50ms
- å¹¶å‘å¤„ç†èƒ½åŠ›: 100+ è¯·æ±‚/ç§’

### 2. æ•°æ®é‡æ”¯æŒ
- ç”¨æˆ·æ•°é‡: 10,000+
- è®¢å•æ•°é‡: 100,000+
- æŠ•èµ„è®¡åˆ’: 100+

### 3. ç³»ç»Ÿèµ„æº
- å†…å­˜ä½¿ç”¨: < 512MB
- CPU ä½¿ç”¨: < 30%
- ç£ç›˜ç©ºé—´: < 1GB

## å®‰å…¨è€ƒè™‘

### 1. å·²å®ç°å®‰å…¨æªæ–½
- JWT ä»¤ç‰Œè®¤è¯
- ç”¨æˆ·æƒé™æ§åˆ¶
- è¾“å…¥æ•°æ®éªŒè¯
- SQL æ³¨å…¥é˜²æŠ¤

### 2. å»ºè®®åŠ å¼º
- é€Ÿç‡é™åˆ¶
- API å¯†é’¥ç®¡ç†
- æ•°æ®åŠ å¯†
- å®¡è®¡æ—¥å¿—

## ç»´æŠ¤å’Œæ”¯æŒ

### 1. æ—¥å¸¸ç»´æŠ¤
- æ•°æ®åº“å¤‡ä»½
- æ—¥å¿—ç›‘æ§
- æ€§èƒ½ç›‘æ§
- å®‰å…¨æ›´æ–°

### 2. æ•…éšœæ’é™¤
- æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
- æ£€æŸ¥æ•°æ®åº“è¿æ¥
- éªŒè¯ API å“åº”
- è¿è¡Œæµ‹è¯•è„šæœ¬

### 3. æ‰©å±•å¼€å‘
- æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—
- ä¼˜åŒ–ç°æœ‰åŠŸèƒ½
- æ€§èƒ½è°ƒä¼˜
- å®‰å…¨åŠ å›º

## é¡¹ç›®æ€»ç»“

### å®Œæˆåº¦è¯„ä¼°
- **æ ¸å¿ƒåŠŸèƒ½**: 90% å®Œæˆ
- **API æ¥å£**: 95% å®Œæˆ
- **æ•°æ®æ¨¡å‹**: 100% å®Œæˆ
- **æµ‹è¯•è¦†ç›–**: 80% å®Œæˆ
- **æ–‡æ¡£å®Œæ•´**: 90% å®Œæˆ

### ä¸»è¦æˆå°±
1. âœ… æˆåŠŸå®ç°äº†å®Œæ•´çš„æŠ•èµ„è®¤è´­ç³»ç»Ÿ
2. âœ… ä¿æŒäº†ä¸åŸé¡¹ç›®çš„åŠŸèƒ½ä¸€è‡´æ€§
3. âœ… æä¾›äº†å®Œæ•´çš„æµ‹è¯•å’Œæ–‡æ¡£
4. âœ… å»ºç«‹äº†å¯æ‰©å±•çš„æ¶æ„åŸºç¡€

### æŠ€æœ¯äº®ç‚¹
1. ä½¿ç”¨ Decimal.js ç¡®ä¿é‡‘èè®¡ç®—ç²¾åº¦
2. æ¨¡å—åŒ–è®¾è®¡ä¾¿äºç»´æŠ¤å’Œæ‰©å±•
3. å®Œæ•´çš„ API æ–‡æ¡£å’Œæµ‹è¯•è¦†ç›–
4. éµå¾ª Strapi æœ€ä½³å®è·µ

### ä¸‹ä¸€æ­¥è®¡åˆ’
1. ğŸ”´ ä¿®å¤é«˜ä¼˜å…ˆçº§å®‰å…¨é—®é¢˜
2. ğŸ”´ å®ç°ç¼ºå¤±çš„å…³é”®åŠŸèƒ½ï¼ˆAIä»£å¸ã€æŠ½å¥–ç³»ç»Ÿï¼‰
3. ğŸŸ¡ æ·»åŠ å®Œæ•´çš„å•å…ƒæµ‹è¯•
4. ğŸŸ¡ ä¼˜åŒ–æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§
5. ğŸŸ¢ å®Œå–„ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ

## ç»“è®º

Bixu é¡¹ç›®æˆåŠŸå®ç°äº†æŠ•èµ„è®¤è´­ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä»£ç è´¨é‡è‰¯å¥½ï¼Œæ¶æ„æ¸…æ™°ï¼Œæ–‡æ¡£å®Œæ•´ã€‚è™½ç„¶è¿˜æœ‰ä¸€äº›éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œä½†å·²ç»å…·å¤‡äº†æŠ•å…¥ç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬æ¡ä»¶ã€‚å»ºè®®åœ¨è§£å†³é«˜ä¼˜å…ˆçº§å®‰å…¨é—®é¢˜åï¼Œå¯ä»¥å¼€å§‹è¿›è¡Œç”Ÿäº§éƒ¨ç½²ã€‚

é¡¹ç›®å±•ç°äº†è‰¯å¥½çš„å·¥ç¨‹å®è·µï¼Œä¸ºåç»­çš„åŠŸèƒ½æ‰©å±•å’Œç»´æŠ¤å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚ 